
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Mac Config</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/prism.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <script src="js/vendor/prism.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <div class="container">

      <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Mac Config</a>
<ul>
<li><a href="#sec-1-1">1.1. Introduction</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. What is <b>this</b>?</a></li>
<li><a href="#sec-1-1-2">1.1.2. Wait, what's <code>.org</code>?</a></li>
<li><a href="#sec-1-1-3">1.1.3. Who is this for?</a></li>
<li><a href="#sec-1-1-4">1.1.4. Who uses this?</a></li>
<li><a href="#sec-1-1-5">1.1.5. What Next?</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Configuration</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. OSX Settings</a></li>
<li><a href="#sec-1-2-2">1.2.2. Dotfiles and Repositories</a></li>
<li><a href="#sec-1-2-3">1.2.3. Applications</a></li>
<li><a href="#sec-1-2-4">1.2.4. Homebrew</a></li>
<li><a href="#sec-1-2-5">1.2.5. Git Configuration</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Boxen Administrativia</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Puppetry and File Layout</a></li>
<li><a href="#sec-1-3-2">1.3.2. How to Get Started</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Literate Administrativia</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. Content Extraction</a></li>
<li><a href="#sec-1-4-2">1.4.2. </a></li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Odds and Ends</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. Staying up-to-date with boxen/our-boxen</a></li>
<li><a href="#sec-1-5-2">1.5.2. Given up on a Module Failed Installations</a></li>
<li><a href="#sec-1-5-3">1.5.3. What does a module do?</a></li>
<li><a href="#sec-1-5-4">1.5.4. Where do you find modules?</a></li>
<li><a href="#sec-1-5-5">1.5.5. Which version do you use for a module?</a></li>
<li><a href="#sec-1-5-6">1.5.6. Applications I Installed Manually</a></li>
<li><a href="#sec-1-5-7">1.5.7. Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Mac Config</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Introduction</h3>
<div class="outline-text-3" id="text-1-1">
<p>
I care about how my computer is configured.
</p>

<p>
I like magnifying any part of my screen so that I can easily show
things to my daughter.
</p>

<p>
I like controlling the applications that I am working with. I like
being able to easily expand, shrink, or dismiss the windows they
are in.
</p>

<p>
There are certain programs I know how to use, and I would like them
to automatically installed without any effort on my part.
</p>

<p>
I've put some time into thinking about how to configure my
setup. <b>This</b> is what I've come up with.
</p>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> What is <b>this</b>?</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
As I am typing this, I am writing plain text in a single file
named <code>README.org</code>.
</p>

<p>
However, this single file is <b>versatile</b>.
</p>

<blockquote>
<p>
ver•sa•tile (vûrˈsə-təl, -tīlˌ)
</p>

<p>
adj. Capable of doing many things competently.
</p>

<p>
adj. Having varied uses or serving many functions.
</p>

<p>
adj. Variable or inconstant; changeable.
</p>
</blockquote>

<p>
It is part of a larger collection of files at
<a href="https://github.com/jedcn/mac-config">https://github.com/jedcn/mac-config</a>, and this means a formatted,
web accessible version of this single file is available here:
<a href="https://github.com/jedcn/mac-config/blob/master/README.org">https://github.com/jedcn/mac-config/blob/master/README.org</a>.
</p>

<p>
This file contains chunks of computer code, and these chunks can
be programmatically extracted into distinct files. The snippets
can be split into two categories:
</p>

<ol class="org-ol">
<li>Some of files contain configuration in a language called
<a href="http://puppetlabs.com">puppet</a>. These play a role within a framework named <a href="https://boxen.github.com">boxen</a>, and
<b>are declarations</b> that can change the configuration of my
computer.
</li>
<li>Some of files contain helper code in a language called <a href="http://en.wikipedia.org/wiki/Ruby_(programming_language)">ruby</a>,
and these glue things together by extracting code, building up
the website, etc.
</li>
</ol>

<p>
Finally, this entire file can be converted into HTML and it serves
as the basis of <a href="http://jedcn.github.io/mac-config">http://jedcn.github.io/mac-config</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Wait, what's <code>.org</code>?</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
<b>This</b> is a file named <code>README.org</code>. The <code>.org</code> extension means
that this is a plain text file structured following the
conventions of <a href="http://en.wikipedia.org/wiki/Org-mode">org-mode</a>. org-mode is a part of <a href="https://www.gnu.org/software/emacs/">emacs</a>.
</p>

<p>
A component of org-mode, named <a href="http://orgmode.org/worg/org-contrib/babel/">babel</a>, serves as the basis for
intertwining chunks of code with text, and allowing these chunks
to be extracted.
</p>

<p>
If this seems strange to you, it probably is. Stepping back,
<b>this</b> is an experiment in using <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a> to describe
how I configure my computer.
</p>

<p>
Why document computer configuration at all? It stems from the
tension between these ideas:
</p>

<ol class="org-ol">
<li>I rarely configure a new computer, and yet I deeply care about
how my computer is configured.
</li>
<li>If I had to get a new computer, it would be important for me to
quickly get back to how I like having things setup, and yet,
this happens so infrequently that I would not remember what I
did to get it into the state I had it.
</li>
</ol>

<p>
That said, why use a Literate System? I am not comfortable with
boxen or puppet, so I benefit from having a written description of
my intention near the puppetry. I can also easily include links to
blogs or applications regarding my motivation.
</p>

<p>
It is also motivated by the idea that I am sometimes asked, "How
did you configure your computer to do such-and-such?" I don't have
a great memory so I'd benefit from a self-describing
configuration.
</p>

<p>
The neat trick about Literate Source is that it can be dense
enough to create more than one artifact.
</p>

<blockquote>
<p>
This file <b>is</b> the puppet configuration and it <b>is</b> the website
and it <b>is</b> the glue code that puts everything together.
</p>
</blockquote>

<p>
So, why not make it so that a single document can help me share
with people?
</p>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> Who is this for?</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
Any prose descriptions behind my motivations should be accessible
to all mac users.
</p>

<p>
When it comes to boxen and puppet, what I have here is functional,
but I am not an expert by any means.
</p>

<p>
If you have never worked with boxen or seen a configuration
before, this could help you get the general idea.
</p>
</div>
</div>

<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> Who uses this?</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
I am the only explicit user of this configuration.
</p>

<p>
I use it outside of the context of any group or company, and I
only have a single computer.
</p>

<p>
Having worked with boxen for a small bit now, I think it's all
about <a href="https://en.wikipedia.org/wiki/Metcalfe's_law">Metcalfe's Law</a> in the context of how many users and
computers you're working with. The more of either one you have the
more useful boxen will be.
</p>

<p>
And so, when it's just me, or just you, <b>I'd think twice about
using boxen itself.</b> I have spent more time fooling with boxen
that it would take to take some written notes while directly
configuring a single computer.
</p>

<p>
As I said previously, when it comes to this explicit config, I can
see how someone could get an idea for what boxen is from it, or
perhaps copy and paste a few snippets into theirs. <b>However</b>, no
one should clone or fork this repository. Instead, if you're
looking to get started with boxen for yourself, then you should
read the section "How to Get Started" below.
</p>
</div>
</div>

<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> What Next?</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
Now that we ahve seen a general introduction to this document, and
we understand how it can be used, let's consider what's left.
</p>

<p>
We'll lay things out as follows:
</p>

<ol class="org-ol">
<li>General Introduction (this)
</li>
<li>OSX Settings
</li>
<li>Dotfiles and Repositories
</li>
<li>Applications
</li>
<li>Command Line Utilities
</li>
</ol>

<p>
As we cover the content above, we will mix prose with puppetry
(the language of boxen). We will go straight at the puppet
configuration that enables certain configuration and application
installation. Once we are doen with that, we will see how the
pieces fit together within boxen.
</p>

<p>
Finally, once we have seen the basic configuration and know how
boxen works, we will consider some of the Literate aspects of the
project and supplementary material.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Configuration</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Let's begin by talking about my actual configuration.
</p>

<p>
We'll start with prose alongside puppet, and later on I will
explain how everything comes together in the Boxen Administrativia
section.
</p>

<p>
The code snippets you are about are pieces of functional (as in,
working) puppetry. They defines "rules" about how my computer
should be configured, and this includes:
</p>

<ul class="org-ul">
<li>Which system settings should be in place
</li>
<li>Which repositories should be cloned (say, dotfiles)
</li>
<li>Which links should be created (saa, to cloned dotfiles or
installed applications)
</li>
<li>Which applications should be installed
</li>
<li>Which homebrew installs should be performed
</li>
<li>Which git settings should be configured
</li>
</ul>

<p>
The nature of puppet is that it "makes things match" the rules, and
so, if there is a rule that says 'Chrome needs to be installed'
then puppet will check to see if Chrome is present. <b>If Chrome is
installed</b>, then boxen does nothing. <b>If Chrome is not installed</b>,
then boxen installs it.
</p>

<p>
Consequently, the first run of boxen might take 30 or 40 minutes
while dozens of programs are downloaded and installed, while
subsequent runs take just a few seconds.
</p>
</div>

<div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> OSX Settings</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Configuring OSX settings is normally done through various System
Preferences screens, but with boxen you can write your
configuration in a file.
</p>

<p>
This is one of the most compelling reasons for using boxen. I can
imagine using boxen <b>just</b> for the ability to automatically
configure OSX, and nothing more.
</p>

<p>
Boxen itself doesn't know about OSX, but you can use a module
named <a href="https://github.com/boxen/puppet-osx">puppet-osx</a>, and it provides the ability to do things like:
</p>

<ol class="org-ol">
<li>Map CAPS LOCK to CTRL.
</li>
<li>Make your key presses repeat very quickly.
</li>
<li>Make it so that holding CTRL and scrolling on your trackpad will
magnify the screen underneath the mouse pointer.
</li>
<li>Switch your shell to ZSH.
</li>
<li>Automatically hide the dock.
</li>
<li>Remove clutter from the dock by making it only contain running
apps.
</li>
<li>Setup a message on your lock screen to provides your contact
information if your laptop is found.
</li>
</ol>

<p>
All of these things are tweakable by hand, but using boxen lets
you get going in a flash, and lets you change things (say, the
repeat rate) in a controlled manner that gets checked into source
control.
</p>

<p>
I found <a href="https://github.com/boxen/puppet-osx">the main README of the puppet-osx</a> critical to
understanding the following settings:
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::osx_config {

  # ZSH
  osx_chsh { $::luser:
    shell   =&gt; '/opt/boxen/homebrew/bin/zsh',
    require =&gt; Package['zsh'],
  }

  file_line { 'add zsh to /etc/shells':
    path    =&gt; '/etc/shells',
    line    =&gt; "${boxen::config::homebrewdir}/bin/zsh",
    require =&gt; Package['zsh'],
  }

  # Dock Settings
  include osx::dock::autohide
  include osx::dock::clear_dock

  # Screen Zoom
  include osx::universal_access::ctrl_mod_zoom
  include osx::universal_access::enable_scrollwheel_zoom

  # Key Repeat
  class { 'osx::global::key_repeat_delay':
    delay =&gt; 10
  }
  include osx::global::key_repeat_rate

  # Capslock becomes Control
  include osx::keyboard::capslock_to_control

  # Hot Corners
  osx::dock::hot_corner { 'Show the desktop':
    position =&gt; 'Bottom Right',
    action =&gt; 'Desktop'
  }
  osx::dock::hot_corner { 'Put Display to Sleep':
    position =&gt; 'Bottom Left',
    action =&gt; 'Put Display to Sleep'
  }

  # Recovery Message
  $recovery_owner = "This computer belongs to Jed Northridge."
  $recovery_contact = "If found, please contact jedcn@jedcn.com or 305-985-3326."
  osx::recovery_message { "${recovery_owner} ${recovery_contact}": }
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/osx_config.pp">modules/people/manifests/jedcn/osx<sub>config</sub>.pp</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Dotfiles and Repositories</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
You can configure boxen to clone repositories and ensure their
presence on each run. It doesn't fetch/pull, but it can bring them
down initially. I pull down repositories that are part of my
bootstrapping process. In particular:
</p>

<ul class="org-ul">
<li>My dotfiles (<a href="https://github.com/jedcn/dot-org-files">jedcn/dot-org-files</a>, <a href="https://github.com/jedcn/emacs-setup">jedcn/emacs-setup</a>)
</li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/">oh-my-zsh</a>, and
</li>
<li><a href="https://github.com/rupa/z">z</a> (it's the new j)
</li>
</ul>

<p>
And I land these near boxen, at <code>/opt/init-src</code>.
</p>

<p>
Once these are cloned, I use boxen to create links, say from
<code>~/.slate</code>, to a file within one of these cloned repositories.
</p>

<p>
It is worth noting that you don't have to give up on
whatever-you-were-using-for-creating-links before. They can live
side-by-side, and you can keep using your former system on
machines without boxen.
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::repositories {

  $my_init_src = '/opt/init-src'

  file { $my_init_src:
    ensure =&gt; directory,
    mode   =&gt; 0644,
  }

  repository { "${my_init_src}/dot-org-files":
    source  =&gt; 'jedcn/dot-org-files',
    require =&gt; File[$my_init_src]
  }

  repository { "${my_init_src}/emacs-setup":
    source  =&gt; 'jedcn/emacs-setup',
    require =&gt; File[$my_init_src]
  }

  repository { "${my_init_src}/z":
    source  =&gt; 'rupa/z',
    require =&gt; File[$my_init_src]
  }

  repository { "${my_init_src}/oh-my-zsh":
    source  =&gt; 'robbyrussell/oh-my-zsh',
    require =&gt; File[$my_init_src]
  }
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at
<a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/repositories.pp">modules/people/manifests/jedcn/repositories.pp</a>.
</p>

<p>
And this next puppetry creates several links so that the files
inside of those repositories appear in places relative to my home
directory.
</p>

<p>
The "require" attributes instruct puppet to make sure the main
directory and repositories are cloned before the links are created:
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::links {

  $my_init_src = '/opt/init-src'

  file { "/Users/${luser}/.zshrc":
    ensure  =&gt; link,
    mode    =&gt; '0644',
    target  =&gt; "${my_init_src}/dot-org-files/home/.zshrc",
    require =&gt; Repository["${my_init_src}/dot-org-files"],
  }

  file { "/Users/${luser}/.oh-my-zsh":
    ensure  =&gt; link,
    target  =&gt; "${my_init_src}/oh-my-zsh",
    require =&gt; Repository["${my_init_src}/oh-my-zsh"],
  }

  file { "/Users/${luser}/.slate":
    ensure  =&gt; link,
    mode    =&gt; '0644',
    target  =&gt; "${my_init_src}/dot-org-files/home/.slate",
    require =&gt; Repository["${my_init_src}/dot-org-files"],
  }
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/repositories.pp">modules/people/manifests/jedcn/links.pp</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Applications</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Next up, after dot-files and repositories have been figured out, we
figure out applications like Chrome and Firefox.
</p>

<p>
You can use boxen to install the applications that you work
with. In turn, boxen relies on modules to install
applications. Here are a few modules that I use:
</p>

<ul class="org-ul">
<li><a href="https://github.com/boxen/puppet-firefox">puppet-firefox</a>
</li>
<li><a href="https://github.com/boxen/puppet-chrome">puppet-chrome</a>
</li>
<li><a href="https://github.com/boxen/puppet-slate">puppet-slate</a>
</li>
</ul>

<p>
After you declare that you want to have an application, say
firefox, you run the command <code>boxen</code> and the application will
"just" appear in your Applications folder. In theory, this allows
you to replace visiting a website, downloading a <code>.dmg</code> file, and
running an installer with writing a few lines of configuration and
running boxen.
</p>

<p>
However, you still have the ability to install an application
manually, so which path should you choose?
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-2-3-1" name="sec-1-2-3-1"></a>Boxen vs. Manual Install<br  /><div class="outline-text-5" id="text-1-2-3-1">
<p>
Not all puppet modules are created equally. This is especially so
when it comes to applications: some of them call out older
versions of applications. These may no longer work, or there may
be newer versions available.
</p>

<p>
In some cases, you need to install an application via the
AppStore to get the correctly licensed version of it. This
happened to me with 1Password.
</p>

<p>
I make a choice with each application between using boxen
vs. installing by hand. In general, if I can get it through
boxen, that's what I'd prefer. But, when it's just me (and not a
team of people) I'll give up after 20 minutes of hacking around.
</p>
</div>
</li>

<li><a id="sec-1-2-3-2" name="sec-1-2-3-2"></a>Browsers<br  /><div class="outline-text-5" id="text-1-2-3-2">
<p>
I use the standard set of browsers, and can pull in Chrome,
Firefox, and their development versions.
</p>
</div>
</li>

<li><a id="sec-1-2-3-3" name="sec-1-2-3-3"></a>Window Management<br  /><div class="outline-text-5" id="text-1-2-3-3">
<p>
<a href="https://github.com/jigish/slate">Slate</a> was a game changer for me, and I've written more about it
here: <a href="http://jedcn.com/posts/slate/">http://jedcn.com/posts/slate/</a>.
</p>
</div>
</li>

<li><a id="sec-1-2-3-4" name="sec-1-2-3-4"></a>Declarations<br  /><div class="outline-text-5" id="text-1-2-3-4">
<p>
Here's the puppetry that handles my applications:
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::applications {
  include chrome
  include chrome::canary
  include firefox
  include slate
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at
<a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/applications.pp">modules/people/manifests/jedcn/applications.pp</a>.
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> Homebrew</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
I get many command line utilities from <a href="http://brew.sh">homebrew</a>.
</p>

<p>
Boxen allows me to replace several <code>brew install</code> commands with a
single boxen run.
</p>

<p>
As I scan through what's below, I recognize that the majority of
packages are simple, standard installs. It's like typing <code>brew
    install ag</code>, for example.
</p>

<p>
However, you can install with options, as I do with emacs. I
learned about these particular options in this post: <a href="http://emacsredux.com/blog/2013/08/21/color-themes-redux/">Color Themes:
Redux</a>.
</p>

<p>
Two quick notes in regards to puppet:
</p>

<ul class="org-ul">
<li>Homebrew is the standard package provider for puppetry within
boxen. This means that if you declare a <code>package</code> (as seen below)
then the <code>provider</code> defaults to <code>homebrew</code>.
</li>
<li>If you install <code>cask</code> before you have <code>emacs</code>, then homebrew
tries to grab <code>emacs</code> (without the options I like). And so&#x2013; you
can use <code>require</code> attributes to manage dependencies with boxen.
</li>
</ul>

<p>
Here are the packages I like:
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::homebrew {
  $homebrew_packages = [
			'ag',
			'tmux',
			'tree',
			'wget',
			'zsh',
			]

  package { $homebrew_packages: }

  package { 'cask':
    ensure  =&gt; present,
    require =&gt; Package['emacs'],
  }

  package { 'emacs':
    ensure          =&gt; present,
    install_options =&gt; [
      '--cocoa',
      '--srgb'
    ],
  }
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/homebrew.pp">modules/people/manifests/jedcn/homebrew.pp</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-2-5" class="outline-4">
<h4 id="sec-1-2-5"><span class="section-number-4">1.2.5</span> Git Configuration</h4>
<div class="outline-text-4" id="text-1-2-5">
<p>
Boxen uses a package named <a href="https://github.com/boxen/puppet-git">puppet-git</a> to manage git configuration
options.
</p>

<p>
I manually set my <code>user.email</code> and <code>user.name</code> when I first started
using my computer, and after some bootstrapping, I got to the point
where I could have boxen set my <code>core.editor</code>, and that's what's
below.
</p>

<p>
I hope to flesh this out in the future.
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn::git {
  git::config::global { 'core.editor':
    value  =&gt; '/opt/boxen/homebrew/bin/emacsclient'
  }
  git::config::global { 'push.default':
    value  =&gt; 'simple'
  }
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn/git.pp">modules/people/manifests/jedcn/git.pp</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Boxen Administrativia</h3>
<div class="outline-text-3" id="text-1-3">
<p>
So far we've had the luxury of just looking at puppet configuration
and presuming that it somehow fits together. In this section, we'll
now consider where files are placed, how they interact, and how
boxen is run.
</p>
</div>

<div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Puppetry and File Layout</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Boxen pays attention to the puppetry in this project on the basis
of my user login: <code>jedcn</code>. The system allows for you to call out a
specific configuration for a user by placing a file at
<code>modules/people/manifests/$USER.pp</code>.
</p>

<p>
And so, I can put content at <code>modules/people/manifests/jedcn.pp</code>
that will be examined each time I run <code>boxen</code>.
</p>

<p>
When I write puppet, I do my best to group declarations into
distinct files, and so, my entry point only includes other files:
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>class people::jedcn {
  include people::jedcn::applications
  include people::jedcn::git
  include people::jedcn::homebrew
  include people::jedcn::links
  include people::jedcn::osx_config
  include people::jedcn::repositories
}
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/modules/people/manifests/jedcn.pp">modules/people/manifests/jedcn.pp</a>.
</p>

<p>
These <code>include</code> statements invoke puppetry in other files, at
locations that match up with the directories if you replace the
<code>::</code> with <code>/</code>. As an example, you can find
<code>people::jedcn::applications</code> at
<code>modules/people/manifests/jedcn/applications.pp</code>.
</p>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> How to Get Started</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
I was confused when I first started using Boxen. I went to the
website, <a href="https://boxen.github.com/">https://boxen.github.com/</a>, but didn't know what to do
next.
</p>

<p>
I suspect that most boxen users do so within the context of a
company, and so, someone has already laid down some basic boxen
infrastructure and then subsequent users get told the first few
steps to bootstrap themselves by someone at the company.
</p>

<p>
If you are like me, and you don't have that luxury, so it may be
helpful to understand what I did:
</p>

<p>
I logged into github.com and forked <a href="https://github.com/boxen/our-boxen">boxen/our-boxen</a>, and now I had
<a href="https://github.com/jedcn/our-boxen">jedcn/our-boxen</a>. Going forward your fork will contain your
configuration (or the configuration of your team) and
boxen/our-boxen can serve as its "upstream". This will allow your
fork to pull in policy, security, and code changes from the main
boxen project.
</p>

<p>
I changed the name of my fork because I had trouble explaining
"our-boxen" to my friends. They didn't know what boxen was and
they didn't understand why I was using the word "our" in a
scenario where I was only managing <b>my own</b> mac config. I picked
the name "mac-config", and the new home of my boxen repository is
<a href="https://github.com/jedcn/mac-config/">jedcn/mac-config</a>.
</p>

<p>
At any rate, now that your fork exists, the next step is to get it
cloned locally and then bootstrap boxen. The first boxen run will
install the defaults that the main boxen/our-boxen promotes.
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-3-2-1" name="sec-1-3-2-1"></a>Bootstrapping<br  /><div class="outline-text-5" id="text-1-3-2-1">
<p>
Boxen has just a couple pre-requisites that need to be met:
</p>

<ul class="org-ul">
<li>xCode should be installed
</li>
<li>Your boxen fork should be cloned to <code>/opt/boxen/repo</code>
</li>
</ul>

<p>
Once you've got these, you can run <code>boxen</code>. If you're down with
puppet, this is apparently very similar to a masterless scenario
where you're running <code>puppet apply</code>.
</p>

<p>
I'm not down with puppet, so I think of it as effectively
"reifying" your boxen config.
</p>

<p>
The following commands should do the trick re: the
pre-requisites:
</p>

<div class="org-src-container">

<pre class="src src-sh">xcode-select --install
sudo mkdir -p /opt/boxen
sudo chown ${USER}:staff /opt/boxen
git clone https://github.com/jedcn/mac-config /opt/boxen/repo
/opt/boxen/repo/script/boxen
</code></pre>
</div>

<p>
When the first boxen run completed I didn't have any of the
configuration that you've seen so far. Instead, I had whatever
was in my clone, and this matched boxen/our-boxen on the day I
forked it. So, what does your first boxen run get you?
</p>

<p>
The official answer is here: <a href="https://github.com/boxen/our-boxen#what-you-get">boxen/our-boxen#what-you-get</a>. But, I
suspect this is out of date. Is nodenv the same thing as nvm?
</p>

<p>
When it comes to ruby and node, I had several installations via
<a href="https://github.com/wfarr/nodenv">nodenv</a> and <a href="https://github.com/sstephenson/rbenv">rbenv</a>. These were located at <code>/opt/rubies</code> and
<code>/opt/boxen/nodenv/versions</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ ls /opt/rubies
1.9.3      1.9.3-p545 2.0.0      2.0.0-p451 2.1.0      2.1.1      2.1.2

$ ls /opt/boxen/nodenv/versions
v0.10    v0.10.31 v0.6     v0.6.20  v0.8     v0.8.26
</code></pre>
</div>

<p>
Until now, I always used <code>rvm</code> rather than <code>rbenv</code>, and I have
never used <code>nodenv</code>. Further&#x2013; when it comes to node&#x2013; I doubt
I'll ever need any version that's less than 0.10, but I didn't
sweat this, nor try to change it.
</p>

<p>
My thinking here is that what matters is ruby and node, not
necessarily one tool for getting ruby or node over another.
Further, I don't mind having a few extra rubies or nodes around.
</p>

<p>
Finally&#x2013; even though ruby and node are some of my goto
programming languages&#x2013; I can still see serious value in using
boxen to manage OSX Configuration and Applications <b>even if</b> the
users of a computer <b>never use</b> ruby or node.
</p>
</div>
</li>

<li><a id="sec-1-3-2-2" name="sec-1-3-2-2"></a>Subsequent Runs<br  /><div class="outline-text-5" id="text-1-3-2-2">
<p>
This first <code>boxen</code> run took about 25-30 minutes. However, once my
initial run was done, then you can run boxen at any time by
typing <code>boxen</code>, and, if there's nothing to do, a run can be
completed in as little as 10 seconds.
</p>

<p>
And then you can get into a flow where you make a change to your
puppet configuration, run boxen, and see what happens.
</p>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Literate Administrativia</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Earlier on I said,
</p>

<blockquote>
<p>
<b>this</b> is an experiment in using <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a> to describe
 how I configure my computer.
</p>
</blockquote>

<p>
And then I said:
</p>

<blockquote>
<p>
The neat trick about Literate Source is that it can be dense
enough to create more than one artifact. This file <b>is</b> the
puppet configuration and it <b>is</b> the website and it <b>is</b> the glue
code that puts everything together.
</p>
</blockquote>

<p>
And then I stopped talking about it.
</p>

<p>
Let's revisit these ideas now that we've been through the majority
of the puppet configuration.
</p>

<p>
This single document <b>is</b> code.
</p>

<p>
And it is English prose.
</p>

<p>
It is puppet.
</p>

<p>
It is ruby.
</p>

<p>
And it is html.
</p>

<p>
It is available here
<a href="https://github.com/jedcn/mac-config/blob/master/README.org">https://github.com/jedcn/mac-config/blob/master/README.org</a>.
</p>

<p>
And here: <a href="http://jedcn.github.io/mac-config">http://jedcn.github.io/mac-config</a>.
</p>

<p>
This is possible because snippets of code, spanning any language,
are embedded into this document. Most of them have associated
directives that indicate how they should be extracted.
</p>

<p>
Let's talk more about that.
</p>
</div>

<div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Content Extraction</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
This single <code>.org</code> file can be extracted into many component
pieces. What comes out of the file? The pieces are puppetry, web
files, and ruby:
</p>

<ul class="org-ul">
<li>*.pp files (for boxen runs)
</li>
<li>HTML files (for building a static, descriptive site)
</li>
<li>A <code>Rakefile</code> and supporting <code>./rakelib/*.rake</code> files.
</li>
</ul>

<p>
The extraction process is powered by ruby and emacs, if you have
this repository cloned, you can type <code>rake tangle</code> and this single
file will be unpacked.
</p>

<p>
How does this work? Whenever you run Rake, you need to start with
the <code>Rakefile</code>.
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-4-1-1" name="sec-1-4-1-1"></a>The Rakefile<br  /><div class="outline-text-5" id="text-1-4-1-1">
<p>
The first role played by the <code>Rakefile</code> is its mere
existence. When you run a <code>rake -W</code> or a <code>rake -T</code> rake comes to
life and starts looking "up" until it finds a <code>Rakefile</code>.
</p>

<p>
From there, it looks down in the <code>./rakelib</code> directory for files
ending in <code>.rake</code>.
</p>

<p>
Additionally, the <code>Rakefile</code>:
</p>

<ul class="org-ul">
<li>defines a function named <code>run</code> which enhances standard command
execution so that you can get access to stdout, stderr, and the
process' signal.
</li>
<li>It defines a task named <code>:emacs_installed</code>. This allows other
tasks to call it out as a pre-requisite and serves as asserting a
pre-condition that we "have" emacs installed.
</li>
<li>Calls out <code>:tangle</code> (defined elsewhere) as the default
task. You can invoke the default task by typing <code>rake</code> without
any other arguments. Tangle is nomenclature from Donald Knuth&#x2013;
I've been using the term "extract" synonymously.
</li>
</ul>

<div class="org-src-container">

<pre>
<code class='language-ruby'>def run(c)
  require 'open3'
  _stdin, stdout, stderr = Open3.popen3(c)
  [ stdout.gets, stderr.gets, $?.to_i ]
end

task :emacs_installed do
  location = `which emacs`
  raise 'Unable to find emacs' if location.empty?
end

task default: :tangle
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/Rakefile">Rakefile</a>.
</p>

<p>
Which leads to the question, <b>What's :tangle?</b>
</p>
</div>
</li>

<li><a id="sec-1-4-1-2" name="sec-1-4-1-2"></a>Tangling (extracting) README.org into distinct files<br  /><div class="outline-text-5" id="text-1-4-1-2">
<p>
A file named <code>./rakelib/tangle.rake</code> defines the <code>:tangle</code> task,
and this extracts all of the code snippets in <code>README.org</code> to
various files.
</p>

<p>
While emacs is a text editor, it is also a tool that can execute
<a href="https://en.wikipedia.org/wiki/Emacs_Lisp">elisp</a>. Further, if you run emacs in "batch mode," it does not
start the text editing user interface it is most commonly
associated with.
</p>

<p>
And so, below, you'll see a ruby function that contains a brief
bit of elisp which uses org-babel functions to extract the snippets.
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>def tangle_file_using_emacs(file)
  args = '--no-init-file --no-site-file --batch'
  tangle_elisp =
    %Q|(progn (require 'ob-tangle) (org-babel-tangle-file \\"#{file}\\"))|
  command = %Q|emacs #{args} --eval "#{tangle_elisp}"|
  _stdout, stderr, status = run(command)
  puts stderr unless status == 0
end

desc 'tangle literate source into puppet'
task :tangle =&gt; :emacs_installed do
  tangle_file_using_emacs('README.org')
end
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/rakelib/tangle.rake">rakelib/tangle.rake</a>.
</p>

<p>
And so, that's how all of the puppetry that you've seen above is
unpacked.
</p>
</div>
</li>

<li><a id="sec-1-4-1-3" name="sec-1-4-1-3"></a>Flow<br  /><div class="outline-text-5" id="text-1-4-1-3">
<p>
What this means is that I take the following steps when I want to
change my computer configuration:
</p>

<ul class="org-ul">
<li>I revisit <code>README.org</code> and I look for where the new
configuration might fit.
</li>
<li>I add a prose description of what I am looking to do.
</li>
<li>I update a snippet of puppet
</li>
<li>I then jump to a terminal and run <code>rake &amp;&amp; boxen</code>
</li>
<li>The <code>rake</code> command extracts the contents into the puppet files,
and the boxen command reifies the puppet config.
</li>
</ul>

<p>
Once I like what I see, I commit both the <code>README.org</code> and the
associated puppet file. This means generated code is commit to
source control. The files are small, and they don't get out of
sync, so I haven't had a problem with it. I briefly considered
adding the puppet files to a <code>.gitignore</code> and keeping them in
only one location, but decided I'd rather have everything in
source even if there's a chance they get out of sync.
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> <a href="http://jedcn.github.io/mac-config">http://jedcn.github.io/mac-config</a></h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
This <code>README.org</code> file can be transformed into HTML using an
export mechanism that is built into org-mode.
</p>

<p>
The content is effectively put into HTML within a <code>&lt;body&gt;&lt;/body&gt;</code>,
and then it is inserted into a basic template from
HTML5Boilerplate.
</p>

<p>
This is achieved by minimally converting the HTML5Boilerplate HTML
into ERB and by writing a rake task that can download and unpack
an HTML5Boilerplate zip.
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-4-2-1" name="sec-1-4-2-1"></a><code>rakelib/index.html.erb</code><br  /><div class="outline-text-5" id="text-1-4-2-1">
<p>
There are a few versions of <a href="http://html5boilerplate.com/">HTML5BoilerPlate</a>, and the one we see
below is based on the Bootstrap. I removed the core content and
replaced it with a single ERB substitution. I also added a link
to <code>prism.js</code> and <code>prism.css</code>. I manually downloaded these.
</p>

<div class="org-src-container">

<pre>
<code class='language-markup'>&lt;!DOCTYPE html&gt;
&lt;!--[if lt IE 7]&gt;      &lt;html class="no-js lt-ie9 lt-ie8 lt-ie7"&gt; &lt;![endif]--&gt;
&lt;!--[if IE 7]&gt;         &lt;html class="no-js lt-ie9 lt-ie8"&gt; &lt;![endif]--&gt;
&lt;!--[if IE 8]&gt;         &lt;html class="no-js lt-ie9"&gt; &lt;![endif]--&gt;
&lt;!--[if gt IE 8]&gt;&lt;!--&gt; &lt;html class="no-js"&gt; &lt;!--&lt;![endif]--&gt;
    &lt;head&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;
	&lt;title&gt;Mac Config&lt;/title&gt;
	&lt;meta name="description" content=""&gt;
	&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

	&lt;link rel="stylesheet" href="css/bootstrap.min.css"&gt;
	&lt;style&gt;
	    body {
		padding-top: 50px;
		padding-bottom: 20px;
	    }
	&lt;/style&gt;
	&lt;link rel="stylesheet" href="css/bootstrap-theme.min.css"&gt;
	&lt;link rel="stylesheet" href="css/prism.css"&gt;
	&lt;link rel="stylesheet" href="css/main.css"&gt;

	&lt;script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"&gt;&lt;/script&gt;
	&lt;script src="js/vendor/prism.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
	&lt;!--[if lt IE 7]&gt;
	    &lt;p class="browsehappy"&gt;You are using an &lt;strong&gt;outdated&lt;/strong&gt; browser. Please &lt;a href="http://browsehappy.com/"&gt;upgrade your browser&lt;/a&gt; to improve your experience.&lt;/p&gt;
	&lt;![endif]--&gt;

    &lt;div class="container"&gt;

      &lt;%= content %&gt;

      &lt;hr&gt;

      &lt;footer&gt;
	&lt;p&gt;
	  &lt;img title=":money_with_wings:" alt=":money_with_wings:"
	       src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4b8.png"&gt;
	&lt;/p&gt;
      &lt;/footer&gt;
    &lt;/div&gt; &lt;!-- /container --&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/rakelib/index.html.erb">rakelib/index.html.erb</a>.
</p>
</div>
</li>

<li><a id="sec-1-4-2-2" name="sec-1-4-2-2"></a><code>rakelib/ghpages.rake</code><br  /><div class="outline-text-5" id="text-1-4-2-2">
<p>
Next, I wrote up Rake-based instructions for building up static
web content that serves as a website.
</p>

<p>
This static content will be hosted on Github Pages, and so, the
following makes it so that the directory <code>gh-pages/</code> is created
and the contents of that directory are a single branch from this
same repository.
</p>

<p>
There's also a part that knows about <a href="http://www.initializr.com">http://www.initializr.com</a>,
and how to download a copy of HTML5 Boiler Plate. This comes in a
ZIP. These instructions know how to unpack the ZIP and put parts
of it in the right places.
</p>

<p>
Finally there's a part in here that knows how to extract this
<code>.org</code> file using emacs into HTML and then insert that HTML into
an ERB enhanced template.
</p>

<div class="org-src-container">

<pre>
<code class='language-ruby'>require 'rake/clean'

desc 'Create Github Pages content'
task 'build-gh-pages' =&gt; [ 'gh-pages',
			   'gh-pages-supporting-content',
			   'gh-pages/index.html' ]

#
# Setup ./gh-pages as a git clone with gh-pages checked out.
#
directory 'gh-pages' do
  repo = 'https://github.com/jedcn/mac-config.git'
  branch = 'gh-pages'
  dir = branch
  args = "#{repo} --branch #{branch} --single-branch ./#{dir}"
  command = "git clone #{args}"
  stdout, stderr, _status = run(command)
  puts stderr, stdout
end

#
# Extract supporting content from HTML5BoilerPlate
#
task 'gh-pages-supporting-content' =&gt; [ 'gh-pages/favicon.ico',
					'gh-pages/css/bootstrap.min.css',
					'gh-pages/css/bootstrap-theme.min.css',
					'gh-pages/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js' ]

CLEAN.include('gh-pages/initializr.zip')
CLEAN.include('gh-pages/initializr')
file 'gh-pages/initializr' do
  chdir('gh-pages') do
    `wget -O initializr.zip 'http://www.initializr.com/builder?boot-hero&amp;jquerymin&amp;h5bp-iecond&amp;h5bp-chromeframe&amp;h5bp-analytics&amp;h5bp-favicon&amp;h5bp-appletouchicons&amp;modernizrrespond&amp;izr-emptyscript&amp;boot-css&amp;boot-scripts'`
    `unzip initializr.zip`
  end
end

#
# Setup files from HTML5BoilerPlate
#
def cp_from_initializr(file, dir)
  dest =
    if dir
      "gh-pages/#{dir}"
    else
      'gh-pages'
    end
  FileUtils.cp("gh-pages/initializr/#{file}", dest, verbose: true)
end

file 'gh-pages/favicon.ico' =&gt; 'gh-pages/initializr' do
  cp_from_initializr('favicon.ico')
end

directory 'gh-pages/css' =&gt; 'gh-pages'
directory 'gh-pages/js' =&gt; 'gh-pages'
directory 'gh-pages/js/vendor' =&gt; 'gh-pages/js'

file 'gh-pages/favicon.ico' =&gt; 'gh-pages/initializr' do
  cp_from_initializr('favicon.ico')
end

file 'gh-pages/css/bootstrap.min.css' =&gt; 'gh-pages/css' do
  cp_from_initializr('css/bootstrap.min.css', 'css')
end

file 'gh-pages/css/bootstrap-theme.min.css' =&gt; 'gh-pages/css' do
  cp_from_initializr('css/bootstrap-theme.min.css', 'css')
end

file 'gh-pages/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js' =&gt;
     'gh-pages/js/vendor' do
  cp_from_initializr('js/vendor/modernizr-2.6.2-respond-1.1.0.min.js',
		     'js/vendor')
end

directory 'gh-pages/css' =&gt; 'gh-pages'

file 'README.html' =&gt; :emacs_installed do
  export_html_using_emacs('README.org')
end

file 'gh-pages/index.html' =&gt; [ 'gh-pages', 'README.html' ] do

  require 'erb'
  require 'ostruct'

  class ContentWrapper &lt; OpenStruct
    def render(template)
      ERB.new(template).result(binding)
    end
  end

  template = File.read('rakelib/index.html.erb')

  content = File.read('README.html')

  cw = ContentWrapper.new({ content: content })
  File.open('gh-pages/index.html', 'w') do |file|
    file.write(cw.render(template))
  end

  rendered = File.read('gh-pages/index.html')
  ruby = "&lt;pre&gt;\n&lt;code class='language-ruby'&gt;"
  rendered = rendered.gsub('&lt;pre class="src src-puppet"&gt;', ruby)
  rendered = rendered.gsub('&lt;pre class="src src-ruby"&gt;', ruby)

  html = "&lt;pre&gt;\n&lt;code class='language-markup'&gt;"
  rendered = rendered.gsub('&lt;pre class="src src-html"&gt;', html)

  rendered = rendered.gsub('&lt;/pre&gt;', '&lt;/code&gt;&lt;/pre&gt;')
  File.open('gh-pages/index.html', 'w') do |file|
    file.write(rendered)
  end
  rm 'README.html', verbose: true
end

def export_html_using_emacs(file)
  args = '--no-init-file --no-site-file --batch'
  tangle_elisp =
    %Q|(progn (require 'org) (find-file (expand-file-name \\"#{file}\\" \\"`pwd`\\")) (org-html-export-to-html nil nil nil t))|
  command = %Q|emacs #{args} --eval "#{tangle_elisp}"|
  stdout, stderr, _status = run(command)
  puts stderr
  puts stdout
end
</code></pre>
</div>

<p>
The extracted version of this file is available in
<a href="https://github.com/jedcn/mac-config">jedcn/mac-config</a> at <a href="https://github.com/jedcn/mac-config/blob/master/rakelib/ghpages.rake">rakelib/ghpages.rake</a>.
</p>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Odds and Ends</h3>
<div class="outline-text-3" id="text-1-5">
<p>
The following information, while valuable to me, didn't rightly fit
in anywhere, and so it landed here until it can be sorted out.
</p>
</div>

<div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> Staying up-to-date with boxen/our-boxen</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
This repository is a fork of <a href="https://github.com/boxen/our-boxen">boxen/our-boxen</a>, and so, while I've
done a bunch of customization, I'd like to stay up-to-date with the
original repository to get fixes, security patches, etc.
</p>

<p>
This is setup by creating a remote named "upstream" that points to
<a href="https://github.com/boxen/our-boxen">boxen/our-boxen</a>. Then the master branch from this repo is merged in
like regular.
</p>

<p>
The directions are here: <a href="https://help.github.com/articles/syncing-a-fork/">github.com/articles/syncing-a-fork/</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> Given up on a Module Failed Installations</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
Near as I can tell, if you try to get something running with boxen
and then you give up and remove the puppetry, you'll still have
whatever-didnt-install-the-way-you-wanted installed, and so, you
can manually remove that thing but you should also remove
something called a "receipt" that can be found in the <code>/var/db</code>
directory, for example:
</p>

<ul class="org-ul">
<li><code>sudo rm .puppet_compressed_app_installed_1Password\ 5</code>
</li>
<li><code>sudo rm /var/db/.puppet_appdmg_installed_LittleSnitch</code>
</li>
</ul>

<p>
I learned about receipts in the <a href="https://github.com/boxen/our-boxen/blob/master/docs/faq.md">official boxen FAQ</a>.
</p>
</div>
</div>

<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> What does a module do?</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
If you've found a puppet module that you'd like to check out, the
first place to look is in the file named <code>manifests/init.pp</code>. I
believe this is the entry point for all modules. You can usually
see other files that are included into it or URLs, version
numbers, and configuration options.
</p>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> Where do you find modules?</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
Modules can be defined anywhere, and the most popular ones are
underneath the Boxen Github repository: <a href="https://github.com/boxen/">https://github.com/boxen/</a>.
</p>

<p>
You can search for ones that are formally part of that
organization by visiting the link above and typing the name of the
application into to the "Filters."
</p>
</div>
</div>

<div id="outline-container-sec-1-5-5" class="outline-4">
<h4 id="sec-1-5-5"><span class="section-number-4">1.5.5</span> Which version do you use for a module?</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
If you've found a module that you'd like to use, such as this one:
<a href="https://github.com/boxen/puppet-slate">https://github.com/boxen/puppet-slate</a>, you can add it to your
<code>Puppetfile</code>.
</p>

<p>
It's not immediately obvious which version to use, and so far, the
following has worked for me: look at the tags on the repository,
and pick the largest version.
</p>
</div>
</div>

<div id="outline-container-sec-1-5-6" class="outline-4">
<h4 id="sec-1-5-6"><span class="section-number-4">1.5.6</span> Applications I Installed Manually</h4>
<div class="outline-text-4" id="text-1-5-6">
<p>
I installed the following Software manually:
</p>
</div>

<ol class="org-ol"><li><a id="sec-1-5-6-1" name="sec-1-5-6-1"></a>1Password<br  /><div class="outline-text-5" id="text-1-5-6-1">
<p>
I tried getting onepassword here (with <a href="https://github.com/boxen/puppet-onepassword">puppet-onepassword</a>), but I
couldn't figure out the licensing. Specifically, after a boxen
run it was in trial mode and looking for a license file. But, I
didn't have a license because I bought 1Password through the
AppStore.
</p>

<p>
After 15 minutes of mucking around, I installed through the
AppStore, and things worked just fine.
</p>
</div>
</li>

<li><a id="sec-1-5-6-2" name="sec-1-5-6-2"></a>Little Snitch<br  /><div class="outline-text-5" id="text-1-5-6-2">
<p>
I tried installing this via puppet. I tried a provider of <code>appdmg</code>
and <code>pkgdmg</code>, and neither did I was expected. I started with
<code>appdmg</code>, and this put both the Installer and Uninstaller in my
Applications&#x2013; but that's not what I want. I want to run the
Installer <b>once</b> and then have "Little Snitch Configuration" be
the only thing that's in my Applications.
</p>

<p>
Anyway&#x2013; I gave up and I downloaded it from this URL and
double-clicked to the install:
</p>

<p>
<a href="http://www.obdev.at/downloads/littlesnitch/LittleSnitch-3.5.1.dmg">http://www.obdev.at/downloads/littlesnitch/LittleSnitch-3.5.1.dmg</a>
</p>

<p>
The install required a reboot, and after that, it immediately
started going.
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-5-7" class="outline-4">
<h4 id="sec-1-5-7"><span class="section-number-4">1.5.7</span> Resources</h4>
<div class="outline-text-4" id="text-1-5-7">
<p>
My main resource was Gary Larizza's article called "<a href="http://garylarizza.com/blog/2013/02/15/puppet-plus-github-equals-laptop-love/">Puppet + Github
= Laptop &lt;3</a>" and <a href="https://github.com/glarizza/my-boxen/">glarizza/my-boxen</a>.
</p>

<p>
Other resources included:
</p>

<ul class="org-ul">
<li>The official boxen homepage: <a href="https://boxen.github.com">https://boxen.github.com</a>
</li>
<li><a href="https://github.com/boxen/our-boxen">boxen/our-boxen</a>
</li>
<li>Visiting <a href="https://github.com/boxen/">https://github.com/boxen/</a> and then filtering through all
of the puppet-* projects.
</li>
<li><a href="http://jjasghar.github.io/blog/2014/01/01/customizing-boxen/">http://jjasghar.github.io/blog/2014/01/01/customizing-boxen/</a>
</li>
</ul>
</div>
</div>
</div>
</div>


      <hr>

      <footer>
        <p>
          <img title=":money_with_wings:" alt=":money_with_wings:"
               src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4b8.png">
        </p>
      </footer>
    </div> <!-- /container -->
    </body>
</html>
